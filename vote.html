<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elite Dior Voting Terminal | Admin Suite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;400;700;900&display=swap');
    
    body {
      background: radial-gradient(circle at top right, #050510, #000);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }

    .heading-font { font-family: 'Syncopate', sans-serif; }

    .glass {
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .admin-gradient {
      background: linear-gradient(135deg, #1e3a8a 0%, #000 100%);
    }

    input, select {
      background: rgba(255,255,255,0.05) !important;
      border: 1px solid rgba(255,255,255,0.1) !important;
      color: white !important;
    }

    .category-card:hover {
      border-color: #3b82f6;
      transform: translateY(-5px);
    }
  </style>
</head>
<body class="text-white min-h-screen">

<div id="alertModal" class="fixed inset-0 hidden z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-sm">
  <div class="glass border-blue-500 rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl">
    <div id="alertIcon" class="text-4xl mb-4 text-blue-500"></div>
    <h3 id="alertTitle" class="heading-font text-sm mb-2 uppercase tracking-widest">Notification</h3>
    <p id="alertMessage" class="text-gray-400 text-sm mb-6"></p>
    <button onclick="closeAlert()" class="w-full py-3 bg-blue-600 rounded-xl font-bold uppercase text-xs tracking-widest">Dismiss</button>
  </div>
</div>

<div id="authModal" class="fixed inset-0 hidden z-[150] flex items-center justify-center p-6 bg-black/95">
  <div class="glass border-white/10 rounded-[2rem] p-10 max-w-md w-full text-center">
    <i class="fa-solid fa-shield-halved text-5xl text-blue-600 mb-6"></i>
    <h2 class="heading-font text-xl mb-2 uppercase italic">Admin Access</h2>
    <p class="text-gray-500 text-xs mb-8 uppercase tracking-widest">Enter Security Credentials</p>
    <input type="password" id="pinInput" placeholder="••••" maxlength="4" class="w-full text-center text-3xl tracking-[1em] py-4 rounded-2xl mb-6 outline-none focus:border-blue-500 transition">
    <div class="flex gap-4">
        <button onclick="closeAuth()" class="flex-1 py-4 text-gray-500 font-bold">Cancel</button>
        <button onclick="verifyPin()" class="flex-1 py-4 bg-white text-black rounded-xl font-black">Login</button>
    </div>
  </div>
</div>

<div id="adminDashboard" class="fixed inset-0 hidden z-[160] admin-gradient overflow-y-auto">
    <nav class="p-6 border-b border-white/5 flex justify-between items-center sticky top-0 bg-black/50 backdrop-blur-md">
        <h2 class="heading-font text-lg italic tracking-tighter">Admin <span class="text-blue-500">Panel</span></h2>
        <button onclick="closeDashboard()" class="w-10 h-10 flex items-center justify-center rounded-full bg-white/10 text-white">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </nav>

    <div class="max-w-6xl mx-auto p-6 grid lg:grid-cols-2 gap-10 mt-8">
        <div class="glass rounded-[2rem] p-8">
            <h3 class="text-xl font-black uppercase mb-6 flex items-center gap-3">
                <i class="fa-solid fa-plus text-blue-500"></i> New Nominee
            </h3>
            <div class="space-y-4">
                <div>
                    <label class="text-[10px] uppercase font-bold text-gray-500 ml-2">Select Category</label>
                    <select id="adminCatSelect" onchange="refreshAdminList()" class="w-full p-4 rounded-xl outline-none focus:border-blue-500"></select>
                </div>
                <input type="text" id="nomName" placeholder="Player Name" class="w-full p-4 rounded-xl outline-none">
                <input type="text" id="nomPos" placeholder="Position (e.g. Forward)" class="w-full p-4 rounded-xl outline-none">
                <input type="text" id="nomImg" placeholder="Image URL (Unsplash/Imgur)" class="w-full p-4 rounded-xl outline-none">
                <button onclick="saveNominee()" class="w-full py-4 bg-blue-600 rounded-xl font-black uppercase tracking-widest hover:bg-blue-500 transition mt-4">
                    Register Nominee
                </button>
            </div>
        </div>

        <div class="glass rounded-[2rem] p-8">
            <h3 class="text-xl font-black uppercase mb-6">Current Registry</h3>
            <div id="adminNomineeList" class="space-y-3 max-h-[500px] overflow-y-auto pr-2">
                </div>
        </div>
    </div>
</div>

<header class="text-center pt-24 pb-12 px-6">
    <h1 class="heading-font text-4xl md:text-7xl italic leading-none">
        ELITE <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-white">DIOR</span>
    </h1>
    <p class="text-gray-500 text-[10px] tracking-[0.5em] uppercase font-bold mt-4">Security Terminal • v2.0</p>
</header>

<main id="publicGrid" class="max-w-7xl mx-auto px-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pb-20"></main>

<div id="votingModal" class="fixed inset-0 hidden z-[100] bg-black overflow-y-auto">
    <div class="p-6 md:p-12">
        <div class="flex justify-between items-center mb-12">
            <h2 id="votingTitle" class="heading-font text-3xl italic"></h2>
            <button onclick="closeVoting()" class="text-3xl text-gray-500">&times;</button>
        </div>
        <div id="votingGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6"></div>
    </div>
</div>

<button onclick="openAuth()" class="fixed bottom-6 right-6 w-14 h-14 bg-white text-black rounded-2xl flex items-center justify-center shadow-2xl z-50">
    <i class="fa-solid fa-gears text-xl"></i>
</button>

<script>
/* ---------------- STATE ---------------- */
let categories = JSON.parse(localStorage.getItem('elite_data')) || {
  best_player: { name: "Best Player", max: 5, nominees: [] },
  best_goalkeeper: { name: "Best Goalkeeper", max: 5, nominees: [] },
  best_defender: { name: "Best Defender", max: 5, nominees: [] },
  best_midfielder: { name: "Best Midfielder", max: 5, nominees: [] },
  best_playmaker: { name: "Best Playmaker", max: 5, nominees: [] },
  best_assist: { name: "Best Assist", max: 5, nominees: [] },
  best_scorer: { name: "Best Goal Scorer", max: 5, nominees: [] },
  best_team: { name: "Best Team", max: 5, nominees: [] },
  best_coach: { name: "Best Coach", max: 5, nominees: [] },
  elite_dior_nominees: { name: "Elite Dior Nominees", max: 30, nominees: [] },
  elite_dior: { name: "Elite Dior", max: 1, nominees: [] }
};

/* ---------------- CORE ---------------- */
function init() {
    localStorage.setItem('elite_data', JSON.stringify(categories));
    const grid = document.getElementById('publicGrid');
    const select = document.getElementById('adminCatSelect');
    grid.innerHTML = "";
    select.innerHTML = "";

    Object.keys(categories).forEach(key => {
        const cat = categories[key];
        // Public UI
        grid.innerHTML += `
            <div onclick="openVoting('${key}')" class="category-card glass p-6 rounded-2xl cursor-pointer transition-all border border-white/5 hover:bg-blue-600/10">
                <div class="flex justify-between items-start mb-6">
                    <h3 class="font-black uppercase text-sm leading-tight max-w-[120px]">${cat.name}</h3>
                    <i class="fa-solid fa-chevron-right text-[10px] text-gray-600"></i>
                </div>
                <div class="flex items-end justify-between">
                    <span class="text-xs font-bold text-blue-500">${cat.nominees.length} / ${cat.max}</span>
                    <span class="text-[9px] text-gray-600 font-bold uppercase tracking-widest">Nominees</span>
                </div>
            </div>
        `;
        // Admin Select
        select.innerHTML += `<option value="${key}">${cat.name}</option>`;
    });
}

/* ---------------- ALERT MODAL ---------------- */
function showAlert(title, msg, icon = "fa-circle-info") {
    document.getElementById('alertTitle').textContent = title;
    document.getElementById('alertMessage').textContent = msg;
    document.getElementById('alertIcon').innerHTML = `<i class="fa-solid ${icon}"></i>`;
    document.getElementById('alertModal').classList.remove('hidden');
}
function closeAlert() { document.getElementById('alertModal').classList.add('hidden'); }

/* ---------------- AUTH & ADMIN ---------------- */
function openAuth() { document.getElementById('authModal').classList.remove('hidden'); }
function closeAuth() { document.getElementById('authModal').classList.add('hidden'); }

function verifyPin() {
    const pin = document.getElementById('pinInput').value;
    if(pin === "3478") {
        closeAuth();
        document.getElementById('pinInput').value = "";
        document.getElementById('adminDashboard').classList.remove('hidden');
        refreshAdminList();
    } else {
        showAlert("Access Denied", "The security PIN provided is incorrect.", "fa-shield-halved");
    }
}

function closeDashboard() { document.getElementById('adminDashboard').classList.add('hidden'); }

function refreshAdminList() {
    const key = document.getElementById('adminCatSelect').value;
    const list = document.getElementById('adminNomineeList');
    list.innerHTML = "";
    
    categories[key].nominees.forEach((n, index) => {
        list.innerHTML += `
            <div class="flex items-center gap-4 bg-white/5 p-3 rounded-xl">
                <img src="${n.image}" class="w-10 h-10 rounded-lg object-cover">
                <div class="flex-1">
                    <p class="text-xs font-black uppercase">${n.name}</p>
                    <p class="text-[10px] text-gray-500">${n.position}</p>
                </div>
                <button onclick="deleteNominee('${key}', ${index})" class="text-red-500 hover:scale-110 transition px-2">
                    <i class="fa-solid fa-trash-can"></i>
                </button>
            </div>
        `;
    });
}

function saveNominee() {
    const key = document.getElementById('adminCatSelect').value;
    const name = document.getElementById('nomName').value;
    const pos = document.getElementById('nomPos').value;
    const img = document.getElementById('nomImg').value;

    if(!name || !pos) return showAlert("Input Required", "Please fill in the name and position.");
    if(categories[key].nominees.length >= categories[key].max) return showAlert("Limit Reached", "This category is full.");

    categories[key].nominees.push({
        id: Date.now(),
        name,
        position: pos,
        image: img || 'https://via.placeholder.com/300'
    });

    document.getElementById('nomName').value = "";
    document.getElementById('nomPos').value = "";
    document.getElementById('nomImg').value = "";
    
    init();
    refreshAdminList();
    showAlert("Success", "Nominee has been added to the registry.", "fa-circle-check");
}

function deleteNominee(key, index) {
    categories[key].nominees.splice(index, 1);
    init();
    refreshAdminList();
}

/* ---------------- VOTING ---------------- */
let activeVotingKey = null;
function openVoting(key) {
    activeVotingKey = key;
    const cat = categories[key];
    if(cat.nominees.length === 0) return showAlert("Notice", "Nominees for this category have not been released yet.");

    document.getElementById('votingTitle').textContent = cat.name;
    const grid = document.getElementById('votingGrid');
    grid.innerHTML = "";

    cat.nominees.forEach(n => {
        grid.innerHTML += `
            <div class="glass p-4 rounded-[2rem] text-center border-white/5 group hover:border-blue-500 transition-all duration-500">
                <img src="${n.image}" class="w-full aspect-[4/5] object-cover rounded-2xl mb-4 group-hover:scale-105 transition">
                <h4 class="font-black text-sm uppercase tracking-tight">${n.name}</h4>
                <p class="text-[10px] text-gray-500 font-bold uppercase mt-1 mb-6">${n.position}</p>
                <button onclick="submitVote(${n.id})" class="w-full py-3 bg-white text-black font-black text-[10px] uppercase rounded-xl hover:bg-blue-600 hover:text-white transition">
                    Submit Vote
                </button>
            </div>
        `;
    });
    document.getElementById('votingModal').classList.remove('hidden');
}

function closeVoting() { document.getElementById('votingModal').classList.add('hidden'); }

function submitVote(id) {
    const votes = JSON.parse(localStorage.getItem('user_votes') || '{}');
    if(votes[activeVotingKey]) {
        showAlert("Security Alert", "You have already cast your choice for this category.", "fa-shield-halved");
        return;
    }
    votes[activeVotingKey] = id;
    localStorage.setItem('user_votes', JSON.stringify(votes));
    showAlert("Confirmed", "Your vote has been securely transmitted.", "fa-circle-check");
    closeVoting();
}

init();
</script>
</body>
</html>
